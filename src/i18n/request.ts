/**
 * i18n é…ç½® - åœ‹éš›åŒ–è¨­å®š
 *
 * ğŸ¯ é€™å€‹æ¨¡çµ„çš„å·¥ä½œï¼š
 * é…ç½® next-intl çš„èªè¨€è¨­å®šå’Œé è¨­è¡Œç‚º
 *
 * ğŸš« é€™å€‹æ¨¡çµ„ä¸åšä»€éº¼ï¼š
 * - ä¸è™•ç†å…·é«”çš„ç¿»è­¯å…§å®¹ï¼ˆç”±ç¿»è­¯æ–‡ä»¶è™•ç†ï¼‰
 * - ä¸è™•ç†çµ„ä»¶å±¤é¢çš„èªè¨€åˆ‡æ›é‚è¼¯
 *
 * âœ… åªè² è²¬ï¼š
 * - å®šç¾©æ”¯æ´çš„èªè¨€åˆ—è¡¨
 * - è¨­å®šé è¨­èªè¨€
 * - é…ç½®èªè¨€æª¢æ¸¬é‚è¼¯
 * - æä¾›ç¿»è­¯è¨Šæ¯è¼‰å…¥å™¨
 *
 * ğŸ’¡ æ¯”å–»ï¼šå°±åƒæ˜¯ã€Œèªè¨€è¨­å®šä¸­å¿ƒã€ï¼Œç®¡ç†æ•´å€‹æ‡‰ç”¨çš„å¤šèªè¨€åŸºç¤é…ç½®
 */

import { notFound } from 'next/navigation';
import { getRequestConfig } from 'next-intl/server';

// ğŸŒ ã€æ”¯æ´èªè¨€ã€‘å®šç¾©æ‡‰ç”¨æ”¯æ´çš„æ‰€æœ‰èªè¨€
export const locales = ['zh-TW', 'en'] as const;

// ğŸ  ã€é è¨­èªè¨€ã€‘ç•¶ç„¡æ³•æª¢æ¸¬åˆ°ç”¨æˆ¶èªè¨€åå¥½æ™‚ä½¿ç”¨
export const defaultLocale = 'zh-TW' as const;

// ğŸ”§ ã€é¡å‹å®šç¾©ã€‘æ”¯æ´çš„èªè¨€é¡å‹
export type Locale = (typeof locales)[number];

// âš™ï¸ã€next-intl é…ç½®ã€‘è¼‰å…¥ç¿»è­¯è¨Šæ¯çš„é…ç½®å‡½æ•¸
export default getRequestConfig(async ({ locale }) => {
  // ğŸš¦ ã€èªè¨€é©—è­‰ã€‘ç¢ºä¿è«‹æ±‚çš„èªè¨€åœ¨æ”¯æ´åˆ—è¡¨ä¸­
  if (!locales.includes(locale as any)) {
    notFound();
  }

  return {
    // ğŸ“¦ ã€å‹•æ…‹è¼‰å…¥ã€‘æ ¹æ“šç•¶å‰èªè¨€è¼‰å…¥å°æ‡‰çš„ç¿»è­¯æ–‡ä»¶
    messages: (await import(`@/../messages/${locale}.json`)).default
  };
});